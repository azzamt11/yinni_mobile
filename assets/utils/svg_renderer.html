<!DOCTYPE html>
<html>
<head>
    <title>SVG Command Renderer</title>
    <style>
        body { font-family: sans-serif; display: flex; gap: 20px; padding: 20px; background: #f4f4f4; }
        textarea { width: 300px; height: 400px; padding: 10px; border-radius: 8px; border: 1px solid #ccc; }
        .preview { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); flex-grow: 1; text-align: center; }
        svg { border: 1px dashed #ddd; max-width: 100%; height: auto; }
    </style>
</head>
<body>

    <div>
        <h3>Input Commands</h3>
        <textarea id="input" oninput="render()" style="
                text-align:left;
                background:#111;
                color:#00aaff;
                padding:12px;
                border-radius:8px;
                max-height:400px;
                overflow:auto;
                font-family:monospace;
                font-size:12px;
            ">
Move(70, 240)
Line(210, 110)
Line(300, 120)
Line(310, 210)
Line(180, 350)
Close()

StrokeWidth(1)
Color(111111)

Circle(150, 230, radius=2)
Circle(230, 220, radius=2)

Move(180, 180)
Line(200, 280)</textarea>
    </div>

    <div class="preview">
        <h3>SVG Preview</h3>
        <div id="svgContainer"></div>
    </div>
    <div class="preview">
    <h3>SVG Code</h3>
        <pre id="svgCode"
            style="
                text-align:left;
                background:#111;
                color:#0f0;
                padding:12px;
                border-radius:8px;
                max-height:400px;
                overflow:auto;
                font-family:monospace;
                font-size:12px;
            ">
        </pre>
    </div>


<script>
    const getRawArg = (line) => {
        const m = line.match(/\(([^)]*)\)/);
        return m ? m[1].trim() : null;
    };
function render() {
    const text = document.getElementById('input').value;
    const lines = text.split('\n');
    
    let svgInner = "";
    let currentPath = "";
    let color = "#000000";
    let strokeWidth = 2;
    let strokeLinecap = "butt";
    let strokeLinejoin = "miter";
    let fill = "none";

    let svgWidth = 400;
    let svgHeight = 400;

    const flushPath = () => {
        if (currentPath.trim() !== "") {
            svgInner += `
                <path
                    d="${currentPath}"
                    stroke="${color}"
                    stroke-width="${strokeWidth}"
                    stroke-linecap="${strokeLinecap}"
                    stroke-linejoin="${strokeLinejoin}"
                    fill="${fill}"
                    fill-rule="evenodd"
                />
            `;
            currentPath = "";
        }
    };

    lines.forEach(line => {
        const parts = line.match(/[-+]?\d*\.\d+|\d+|[a-zA-Z]+/g);
        if (!parts) return;

        const cmd = parts[0];
        const vals = parts.slice(1).map(Number);

        if (cmd === "Move") {
            currentPath += `M ${vals[0]} ${vals[1]} `;
        }
        else if (cmd === "Line") {
            currentPath += `L ${vals[0]} ${vals[1]} `;
        }
        else if (cmd === "Close") {
            currentPath += `Z `;
        }
        else if (cmd === "StrokeWidth") {
            flushPath();
            strokeWidth = vals[0];
        }
        else if (cmd === "Color") {
            flushPath();
            const value = getRawArg(line);
            color = "#" + value;
        }
        else if (cmd === "Fill") {
            flushPath();
            const value = getRawArg(line);
            fill = value === "none" ? "none" : "#" + value;
        }
        else if (cmd === "StrokeLinecap") {
            flushPath();
            strokeLinecap = getRawArg(line);
        }
        else if (cmd === "StrokeLinejoin") {
            flushPath();
            strokeLinejoin = getRawArg(line);
        }
        else if (cmd === "Width") {
            svgWidth = vals[0];
        }
        else if (cmd === "Height") {
            svgHeight = vals[0];
        } else if (cmd === "Circle") {
            flushPath();

            // Extract named parameters (radius=, color=, width=)
            const args = {};
            const matches = line.match(/(\w+)\s*=\s*([#\w.]+)/g) || [];

            matches.forEach(pair => {
                const [key, value] = pair.split('=');
                args[key.trim()] = value.trim();
            });

            // Positional numbers: cx, cy
            const numbers = line.match(/[-+]?\d*\.\d+|\d+/g).map(Number);
            const cx = numbers[0];
            const cy = numbers[1];

            const r = args.radius ? Number(args.radius) : 2;
            const color = args.color ? "#" + args.color : "#111111";
            const fill = args.fill ? "#" + args.fill : "none";
            const strokeW = args.width ? Number(args.width) : strokeWidth;

            svgInner += `
                <circle 
                    cx="${cx}" 
                    cy="${cy}" 
                    r="${r}"
                    fill="${fill}"
                    stroke="${color}"
                    stroke-width="${strokeW}"
                />
            `;
        }
    });

    flushPath();
    const svgCode = `
        <svg width="${svgWidth}" height="${svgHeight}" viewBox="0 0 ${svgWidth} ${svgHeight}">
        ${svgInner}
        </svg>
        `.trim();

    document.getElementById('svgContainer').innerHTML = svgCode;
    document.getElementById('svgCode').textContent = svgCode;
}

render(); // Initial draw
</script>
</body>
</html>